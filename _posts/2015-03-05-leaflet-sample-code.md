---
title: "Making Maps with Leaflet for R"
author: "Mike Bisaha"
date: "March 05, 2015"
output: "html_document"
layout: post
description: presentation
---

File with complete R code can be found here:

# Building maps with Leaflet for R

We'll get started by first downloading leaflet, and installing a few packages. Leaflet for R is still under development and is not yet available on CRAN, so we download from Github.

We'll also need the magrittr package to use the forward pipe operator (%>%) and maptools to import and manage shapefiles, which we'll get to later.

```
# First, install leaflet
require(devtools)
devtools::install_github("rstudio/leaflet")

# then install a few extra packages
library(leaflet)
library(magrittr)
library(maptools)
```


We'll be working with geocoded data from the EPA on pollution and particulate matter from major point sources. Data was available for csv download by state, so I've focused here on the point sources for NOx in New York state.

Here's the EPA page, if you'd like to try this yourself:
[EPA Emissions Sources Data](http://www.epa.gov/air/emissions/where.htm)

## Getting data into R
First thing first, we need to read in our data and inspect the file structure.


```r
## read in data as csv file
NOx_NY <- read.csv(path.expand("~/Desktop/NOx_NY.csv"), header=TRUE, sep=",")

## review data format
head(NOx_NY)
```

```
##                              Facility.Name
## 1                      BORALEX NEW YORK LP
## 2              PEARL LEATHER FINISHERS INC
## 3                         CEDAR CREEK WPCP
## 4 TRIGEN CENTRL UTILITY PLT - MITCHL FIELD
## 5           GLENWOOD LANDING ENERGY CENTER
## 6                  GLOBE METALLURGICAL INC
##                   Facility.Address Latitude Longitude NAICS.Code
## 1                  7019 ST RTE 374  44.8935  -74.0722     221112
## 2            11-21 INDUSTRIAL PARK  43.0275  -74.3539      31611
## 3 3340 MERRICK RD & CEDAR CREEK PK  40.6523  -73.5065      22132
## 4       185 CHARLES LINDBERGH BLVD  40.7260  -73.5897      22121
## 5                         SHORE RD  40.8320  -73.6466     221112
## 6                3807 HIGHLAND AVE  43.1229  -79.0418     331410
##         Pollutant                           Source.Type Emissions.in.Tons
## 1 Nitrogen Oxides Electricity Generation via Combustion        131.660855
## 2 Nitrogen Oxides                                                0.866800
## 3 Nitrogen Oxides         Wastewater Treatment Facility        146.327375
## 4 Nitrogen Oxides Electricity Generation via Combustion        271.463614
## 5 Nitrogen Oxides Electricity Generation via Combustion          0.804625
## 6 Nitrogen Oxides                                              410.124500
##   Year
## 1 2011
## 2 2011
## 3 2011
## 4 2011
## 5 2011
## 6 2011
```

Great! We'll put this aside for use once we review the basic leaflet functions.

## Setting up a leaflet map

The basic leaflet() function can be called with a host of parameters inside it, but using the pipe operator makes this much simpler so we'll use that method here.

The first thing you'll need is the addTiles() function. This pulls in a set of map tiles from the internet and forms the basis of your interactive map.


```r
## basic leaflet map
leaflet() %>% addTiles()
```

<!--html_preserve--><div id="htmlwidget-9513" style="width:672px;height:480px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-9513">{ "x": {
 "calls": [
 {
 "method": "tileLayer",
"args": [
 "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
{
 "minZoom":                 0,
"maxZoom":                18,
"maxNativeZoom": null,
"tileSize":               256,
"subdomains": "abc",
"errorTileUrl": "",
"tms": false,
"continuousWorld": false,
"noWrap": false,
"zoomOffset":                 0,
"zoomReverse": false,
"opacity":                 1,
"zIndex": null,
"unloadInvisibleTiles": null,
"updateWhenIdle": null,
"detectRetina": false,
"reuseTiles": false,
"attribution": "&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>" 
} 
] 
} 
] 
},"evals": [  ] }</script><!--/html_preserve-->

Note that the default is to reference the OpenStreetMaps tiles, but other sets are available. A list of can be found here: 

[Leaflet tile options](http://leaflet-extras.github.io/leaflet-providers/preview/index.html)

Let's pick a more interesting background...


```r
## map attributions also recommended
m = leaflet() %>% addTiles('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', 
                  attribution = 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid,IGN, IGP, UPR-EGP, and the GIS User Community')
m
```

<!--html_preserve--><div id="htmlwidget-3923" style="width:672px;height:480px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-3923">{ "x": {
 "calls": [
 {
 "method": "tileLayer",
"args": [
 "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
{
 "minZoom":                 0,
"maxZoom":                18,
"maxNativeZoom": null,
"tileSize":               256,
"subdomains": "abc",
"errorTileUrl": "",
"tms": false,
"continuousWorld": false,
"noWrap": false,
"zoomOffset":                 0,
"zoomReverse": false,
"opacity":                 1,
"zIndex": null,
"unloadInvisibleTiles": null,
"updateWhenIdle": null,
"detectRetina": false,
"reuseTiles": false,
"attribution": "Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid,IGN, IGP, UPR-EGP, and the GIS User Community" 
} 
] 
} 
] 
},"evals": [  ] }</script><!--/html_preserve-->

There we go. Note that this code pulls in a tile set, and allows you to set attributions for the tiles in the bottom right. Always be sure to included attribution for whoever made the map tiles!

This code also assigns the leaflet map to "m". We can now use the pipe operator to put different layers on this basic map. This is useful if you want to manage several different map backgrounds, or a single default map that you want to show with different data layers.

Though the map has a zoom button built in, you can also set the initial starting map center and zoom level explicitly.


```r
m %>% setView(-77.03653,38.897676, zoom = 16)
```

<!--html_preserve--><div id="htmlwidget-7400" style="width:672px;height:480px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-7400">{ "x": {
 "calls": [
 {
 "method": "tileLayer",
"args": [
 "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
{
 "minZoom":                 0,
"maxZoom":                18,
"maxNativeZoom": null,
"tileSize":               256,
"subdomains": "abc",
"errorTileUrl": "",
"tms": false,
"continuousWorld": false,
"noWrap": false,
"zoomOffset":                 0,
"zoomReverse": false,
"opacity":                 1,
"zIndex": null,
"unloadInvisibleTiles": null,
"updateWhenIdle": null,
"detectRetina": false,
"reuseTiles": false,
"attribution": "Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid,IGN, IGP, UPR-EGP, and the GIS User Community" 
} 
] 
} 
],
"setView": [
 [         38.897676,         -77.03653 ],
               16,
[] 
] 
},"evals": [  ] }</script><!--/html_preserve-->

## Let's plot some data already

Ok, let's layer on that EPA data from earlier in the simplest way possible.


```r
m %>% addCircles(data = NOx_NY)
```

```
## Assuming 'Longitude' and 'Latitude' are longitude and latitude, respectively
```

<!--html_preserve--><div id="htmlwidget-5427" style="width:672px;height:480px;" class="leaflet"></div>
<script type="application/json" data-for="htmlwidget-5427">{ "x": {
 "calls": [
 {
 "method": "tileLayer",
"args": [
 "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
{
 "minZoom":                 0,
"maxZoom":                18,
"maxNativeZoom": null,
"tileSize":               256,
"subdomains": "abc",
"errorTileUrl": "",
"tms": false,
"continuousWorld": false,
"noWrap": false,
"zoomOffset":                 0,
"zoomReverse": false,
"opacity":                 1,
"zIndex": null,
"unloadInvisibleTiles": null,
"updateWhenIdle": null,
"detectRetina": false,
"reuseTiles": false,
"attribution": "Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid,IGN, IGP, UPR-EGP, and the GIS User Community" 
} 
] 
},
{
 "method": "circle",
"args": [
 [           44.8935,           43.0275,           40.6523,            40.726,            40.832,           43.1229,            40.667,           40.9235,           43.1301,              43.1,           40.8075,           40.5897,           41.5433,             42.83,           40.7113,           42.1153,           42.0917,           40.8027,            40.678,           41.0534,           41.1116,           40.5856,           44.7276,           44.5582,           42.5853,           42.0935,           40.7889,           41.0772,           41.3978,           42.9211,           42.9489,           42.9333,           42.8692,            42.963,           40.8179,           40.9168,           42.2913,           42.1203,           42.0785,           40.7365,           43.1811,           43.0209,           42.9982,            42.862,           41.2876,           41.4012,           41.4316,           42.9072,           42.5406,           43.2338,           42.7531,           42.4167,           42.6906,           43.2542,           40.5918,           42.1624,           41.8326,           42.8487,            42.334,           40.7259,           43.0103,           41.7001,            43.369,           43.1326,           42.7501,            42.752,           43.2226,           42.7634,           40.7779,           42.4251,           41.7834,           42.9506,           40.8122,           43.1112,           42.6751,           43.2306,            42.669,           42.2687,           43.1106,           42.9348,           43.5934,           42.2962,           42.1579,            42.637,           42.4248,           42.8412,           44.3124,           40.6001,           43.1278,            42.452,           44.3444,            41.317,             41.85,           42.3381,           42.3237,           42.4073,            40.742,           42.1431,           42.7445,           41.4184,            43.969,           43.2508,           42.6292,           42.6973,           42.9727,           42.1048,           43.0104,           44.3299,           40.8264,           40.6564,           40.8307,           40.8321,           43.0286,           40.7795,           43.1294,            43.062,           42.9392,           43.1691,           43.0037,           43.0799,           42.6315,             40.73,           40.6559,           41.2771,           43.0636,           40.9341,           40.8029,            40.802,           40.6426,           41.6475,           40.7278,            40.768,           43.2177,           42.8556,           41.1266,           41.2421,           44.9433,           43.1142,           42.6551,           42.6154,           42.5382,           40.8158,           43.8864,           42.6018,           43.6177,           41.3844,           40.7663,           40.7446,            41.573,           41.5717,            41.474,           41.4879,           42.0948,           43.1818,           40.8743,           40.8504,           42.1066,           42.2407,           42.8298,           42.4065,           43.3086,            42.924,           42.9706,           42.9673,           41.0424,           43.0648,           42.5666,           43.0803,            40.798,           40.8248,           43.0844,           43.0513,           43.9906,           40.7433,            41.506,           42.7009,           43.1148,           42.6383,           41.0705,            43.182,            42.241,           40.6868,            40.884,           43.5667,           44.6175,            42.754,           42.5764,           41.3681,           42.4625,           40.9617,           42.9284,           42.9001,           40.9076,           44.3167,           42.8251,           43.0861,           41.0822,           43.0098,           42.1129,           41.6843,           40.8023,            42.152,           41.6668,           41.3279,           41.2056,           43.1237,           43.9722,           40.9151,           42.9433,           42.7131,            42.045,           42.4362,           42.1209,           41.3497,           42.3701,           43.1125,           40.7855,           43.0667,           44.1869,           43.2031,           41.7093,           42.1009,           42.5487,           41.8034,           41.8751,            43.044,           43.0853,           42.9876,            42.902,           43.1306,           42.1989,           42.8612,           43.0723,           42.6112,           44.3001,           41.9715,           42.0037,           43.0667,           43.1695,           41.8318,           42.4056,           44.3012,           42.0409,           44.3681,           43.2094,           42.4815,           43.2695,           40.7418,           42.0417,           42.9542,           42.7101,           41.2445,           43.1834,           43.0751,           42.7295,           42.5614,           42.8968,           43.1221,           42.8436,           43.0423,           42.9333,           40.7117,           40.6323,           40.6585,           43.0958,           43.1595,           43.0648,           43.9756,           44.0593,           40.7335,           40.7001,           40.6568,           44.9885,           42.5755,           42.4976,           40.7342,           41.2055,           42.6315,           43.0619,           40.8442,           40.7815,           40.7634,           40.7852,           40.7894,            42.033,            40.767,           43.0586,           42.0821,           42.6111,           42.9567,           43.3057,            40.785,           42.5316,           41.0805,           42.2435,           40.7956,           40.7226,           42.0494,           40.8581,             42.93,           42.0501,           41.2729,           40.9193,           42.9646,           42.9827,           42.3026,           42.1568,           42.4933,           42.2413,           40.7962,           41.5972,           40.7288,           40.8021,           42.1759,           40.6618,             44.05,            41.109,           40.6189,           42.6909,           44.2645,           42.5248,           41.7074,           41.9853,            43.453,           42.1057,           42.1487,           43.2251,           41.9209,           42.2623,           43.2612,           43.1133,           42.9431,           42.7133,           42.9156,           43.7681,           42.1134,           42.7501,           42.8204,           42.7533,           43.2901,           42.5126,           42.0901,           43.1012,           40.8837,           41.2773,           43.1223,            41.372,           42.2798,           42.0278,           42.6644,           42.9584,           42.2872,           42.5856,            41.377,           42.5223,           42.1566,           42.9928,           43.1373,           40.8047,           42.7181,           42.0584,           43.9751,           43.4267,           42.2681,           42.1542,           42.0962,           42.7695,           43.0962,           41.6545,           40.9391,           41.1184,           42.8825,           43.0939,           40.7195,           40.8415,           42.8878,           43.0722,           42.6296,           42.3227,           43.1308,           41.4221,           42.0014,           42.8848,           42.9029,            43.162,           40.8399,           40.7049,           43.1978,           42.9796,           40.7001,           41.4871,           42.3839,           40.8145,            43.892,           40.6615,           40.7381,           40.6098,           41.0768,           41.0472,           42.5757,           40.8125,           43.1028,           43.3535,           40.7617,           40.7381,           40.7412,           40.6107,            42.086,             43.16,           42.0502,           40.8477,           40.8416,           40.8509,           40.8202,           40.8192,           42.1114,           42.7555,           43.1391,           40.9627,           41.2428,           40.9618,           40.7972,            42.491,           41.7017,           40.7869,           43.4534,           42.7881,           40.6107,           42.2719,           43.0317,           43.1034,           40.7426,           41.6279,           43.2079,           44.2139,           41.7084,           42.8428,           43.0292,           43.1167,           42.8077,           43.1392,           40.8376,           42.2917,           43.8434,           42.5978,            42.232,           42.8834,           42.0917,           42.7617,           42.0548,           42.4928,           42.3248,           40.8423,           41.6848,           42.7095,           42.3042,           40.9251,           42.8272,           40.7145,           40.9876,           42.5084,           41.9904,           42.8145,           43.1795,           42.8598,           42.9306,           42.3551,            42.082,           43.2209,           43.0353,           44.6092,           43.0092,           42.8531,           42.8701,           42.9567,           43.0533,           43.1029,           42.5967,           43.2495,            41.669,           44.6667,           40.7103,           42.5039,           42.9162,           43.0612,           40.6053,           42.6667,           43.1195,           42.8417,           42.6517,           42.0501,           42.7784,           42.8532,           43.1148,           42.1416,           43.0393,           43.3709,           43.3072,           42.9139,           43.0806,           42.8658,           41.6405,           40.6538,           40.7864,            40.772,           40.8256,           40.7329,           43.0366,           40.6495,            42.595,           42.9541,           42.4963,           42.6251,           43.3492,           40.9497,           42.6577,           42.6541,           43.4184,           42.4829,           43.4691,           42.4389,           40.8494,           40.7871,           40.7602,           40.7042,           41.4332,           43.0346,           40.8803,           40.8478,           40.7914,           42.1089,            42.088,            41.265,           42.9158,           40.8169,           42.1534,           42.2122,            40.791,           41.2513,           42.3821,           42.7584,           42.9292,           44.6819,           44.1584,           40.6447,           44.8537,           43.0211,           43.3508,           41.6248,            41.577,           42.7414,           43.1032,           42.5607,           43.2439,           43.0089,           42.9398,           42.2839,            43.082,           42.0687,           42.7892,           40.8459,           41.0187,           40.7694,           41.8654,           43.1537,           43.1687,           42.5784,           42.0973,           43.0329,           41.0668,           41.9851,           40.7459,           42.3995,           43.1452,           42.6725,           40.7834,           42.2209,           42.2806,           42.1215,           42.6895,           42.1406,           42.9833,           43.3253,           40.6506,           40.7662,           42.5667,           41.5612,           42.9409,           42.9584,           43.0709,            42.739,           44.7625,           43.8298,           43.1458,           42.9931,           44.1201,            42.994,           42.7358,           40.6666,           42.1501,           43.9995,           42.4917,           43.7252,           40.7126,           42.1029,           42.5284,           41.3668,           42.2051,           42.8209,           43.0711,           42.6156,           42.9062,           42.2868,           42.3272,           44.8119,           43.0645,           40.6448,           40.6257,           40.8275,           40.6457,           43.0804,           43.0811,           43.0837,           43.2122,           42.8829,           42.1635,           43.1661,           42.5816,           43.0686,           43.1528,           42.9911,           44.0367,           41.4598,           42.9054,           40.5445,           42.5819,           43.2492,           42.0684,           42.8732,           43.1841,           42.9836,           40.7825,           40.8111,           40.9789,           40.6606,           43.2278,           42.9909,             44.95,           42.7091,           43.4907,           43.2424,           43.3205,           42.3089,           42.4969,           40.7343,           40.8701,           40.8076,            42.805,           43.3085,            42.562,           42.6773,           43.0122,           42.9716,           40.7566,           40.5823,           40.8279,           43.1133,           40.9502,           42.8481,           42.5709,           40.7147,           43.8626,            43.877,           42.9223,           41.5039,           42.8591,            42.914,           43.4251,           43.5477,           41.7279,           40.7546,           40.8704,           43.2183,           42.0165,           42.4062,           41.3615,           43.4667,            41.639,           43.2659,           43.0501,           42.6664,           42.9834,           41.6062,           41.1025,           43.0942,           42.9139,           41.5975,           40.7978,           42.3673,           43.0056,           43.1578,           43.2028,           43.1956,           41.8647,           43.1923,           42.2343,           43.1772,            42.644,           40.7054,           41.9209,           43.4087,           42.3998,           40.8601,           43.2334,           43.1735,           42.1008,           41.6501,           42.2359,           41.4219,           43.1611,           41.8318,           40.6172,           44.6689,           42.5595,           42.9934,           43.0303,           41.1543,            40.782,           41.6572,            44.088,           40.7862,            42.922,           42.0237,           41.6665,           42.8265,           43.2033,           42.3709,           43.2237,           41.7501,           43.2201,           40.9628,           42.3157,           42.5806,           44.2792,           42.5126,           42.8834,           42.9195,           42.7987,           42.6548,           42.8501,           42.3473,           42.6167,           42.1767,           42.3762,           43.0667,           42.2917,           41.2109,           40.9392,           44.5674,           41.4424,           42.9008,           42.5949,           42.9981,           40.6169,           40.7465,           43.2769,           43.0489,           43.3574,           43.0667,           42.7546,            43.818,           43.9842,            40.701,            40.738,           40.6915,           42.9756,           42.8605,           41.4608,           42.8166,           40.8669,           40.7586,            40.765,            40.765,           40.7549,           40.7914,           40.7456,           42.1182,           40.8138,           40.7894,           42.6791,           40.9079,           40.5895,           40.5795,           42.9614,           42.0553,           43.4586,           43.0645,           44.9824,           41.2106,           42.8487,           40.9617,           40.7798,           41.5042,           44.7126,           40.8994,           42.1156,           43.0537,            43.071,           42.8647,            42.802,           40.6955,           42.5927,           44.6509,           40.8168,            40.844,           42.8438,           42.1128,           42.3191,           42.8837,           40.7045,           40.7755,           40.7524,           42.9388,             41.51,           41.9846,           43.2347,            40.734,           40.7012,           41.1059,           41.8906,           44.4237,           44.2209,           43.8222,           43.3617,           42.6959,            43.314,           42.9973,           42.8734,           40.9584,           40.7664,            43.552,           42.1167,           42.2931,           43.0556,           40.7594,           42.8937,           42.9267,           42.7004,           41.9734,           43.1576,           43.0822,           42.9862,           44.4351,           41.5034,           41.5715,           42.5528,           41.6215,           42.4828,           44.3017,           42.3083,           41.5337,           44.6167,             41.39,           40.6533,           42.7815,           43.2964,           43.8426,           43.0984,           42.4487,           42.1622,           42.6106,           43.3601,           43.1334,           42.6489,           42.9626,           42.0801,           42.3548,           41.3279,           42.6584,            42.489,           41.1132,           42.7584,           41.1097,           42.2056,           43.0851,            42.827,           43.0112,           43.3159,           41.0811,           41.3209,           41.7187,           44.9917,           42.8931,           40.7778,           42.8982,            43.199,           42.2658,           41.9478,           41.4346,           41.3828,           43.0508,           40.6328,           40.7778,           40.8754,           42.1402,           40.6499,           40.6395,            43.128,           40.8817,           40.8944,           40.8415,             40.81,           40.7892,           42.9521,           42.5547,           40.7167,                42,           42.5537,           40.8153,           40.9261,           41.0933,           40.5859,           42.8108,           43.4579,           42.5858,           42.8082,           42.4918,            42.207,           42.6189,           43.0048,            43.097,            44.692,           41.0806,           43.4938,           42.4428,           40.7597,           40.7385,            40.697,           40.7072,           40.6767,           40.7542,           40.7205,           40.6462,           41.4302,           41.3997,           41.4852,           42.5029,           43.1524,           40.8844,           40.8532,           42.8721,           43.0292,           40.6743,           40.7982,           40.8672,             42.96,           42.1095,           41.0769,           40.9596,           40.7584,           44.6767,           44.9358,           42.3643,           42.9814,           44.3853,           43.3412,            40.718,           43.2051,           42.2973,           42.1917,           41.9289,           44.3876,           43.7001,           43.0376,             43.34,           40.8473,            43.087,           42.8126,           42.6476,           41.6834,           42.6292,           40.8014,           41.5945,           41.5269,           43.2667,           42.3295,           40.8004,           42.9584,           42.9343,           40.9569,           43.0188,           40.8001,           43.0009,           41.3279,           40.9876,           42.8273,            43.042,           43.0737,           42.4873,           44.5458,           42.3501,           43.0917,           42.9834,           43.0726,           41.0775,           42.9917,           40.5853,           42.4473,           43.3873,           42.9756,           42.3181,           43.2231,           41.4323,           42.5667,           43.2501,           43.7428,           41.5487,           41.5434,           43.4848,           42.4834,           44.9367,            41.189,           43.0889,           41.1451,           42.8162,            42.085,           42.9429,           40.8143,           42.9917,           42.3292,           40.7993,           42.8472 ],
[          -74.0722,          -74.3539,          -73.5065, -73.58969999999999, -73.64660000000001, -79.04179999999999,          -73.9731,          -73.3426, -77.67740000000001,          -79.0022, -73.96380000000001,          -73.9332,          -73.8228,            -77.84,          -73.9902,          -76.8302,          -76.7872,          -73.2259,          -73.8984, -73.96469999999999,          -74.1365,          -74.1977, -75.44159999999999,          -75.3158, -73.76909999999999, -79.24769999999999,          -73.9096,          -73.8227,          -74.3845, -76.84529999999999,          -78.8931,          -78.8847,          -78.7449,          -78.9143,          -72.9757, -73.12909999999999,          -73.7103, -79.18170000000001,          -76.0963, -73.38849999999999,          -77.9158,          -75.1704,          -74.3296,          -78.7166,          -74.2871, -73.96510000000001, -74.39190000000001,          -77.3216,          -78.4128,           -75.407,          -73.8094,          -74.0162,          -73.7037,          -73.4709,          -73.7801,           -75.128,           -73.876,          -77.9203, -78.79089999999999, -73.55370000000001, -75.82689999999999,          -73.9496,          -75.1596,          -75.6555,          -77.7839,          -78.4614, -77.81059999999999, -74.27849999999999,          -73.7051,           -76.715,          -73.7543,          -73.3347,          -73.1758,          -77.0539, -78.83029999999999,            -78.69,          -76.0562, -75.55970000000001,          -75.5937,          -77.1836,          -73.6251, -77.46550000000001, -75.14790000000001,          -77.8839, -74.45099999999999, -74.17870000000001,          -73.3849, -73.89960000000001,            -78.97, -76.91160000000001,          -74.1425,          -73.6799,          -73.5994,           -74.749,          -73.8732,          -79.4406,          -73.4213,          -73.5912,          -76.6636,          -74.5324,          -74.4288,          -75.6044, -74.89100000000001,          -74.1996,          -78.9044,          -76.2801,          -74.4718,          -73.3618, -72.74590000000001,          -73.5926, -73.64749999999999,          -73.6476, -78.49939999999999,          -73.2933,          -79.0369,          -76.0829,          -76.1161,          -76.3112,          -75.9889,           -79.009, -73.75530000000001,            -73.94, -73.94370000000001, -73.94240000000001,           -73.831,           -73.904,          -73.9615,          -73.9367, -74.03400000000001,          -73.9426, -73.97329999999999,          -73.9511,          -75.4648, -77.09059999999999,          -74.1639,          -74.0193,           -74.881, -73.56959999999999,           -73.754,          -73.7517,          -73.7445,          -73.0641, -75.43429999999999, -76.63460000000001, -75.30589999999999,          -73.5446, -73.26430000000001,          -73.8866,          -73.9646, -73.97499999999999,          -74.0138,          -74.0955,          -77.7805,          -77.6519,          -73.8856,          -73.8785,          -76.0455,          -75.9778, -73.87690000000001,           -76.887,          -73.6195, -78.90349999999999, -78.93040000000001,          -78.9179, -71.95780000000001, -78.29810000000001,          -75.5241,          -76.5384, -73.91419999999999,          -72.7509, -77.38200000000001,          -73.8612,          -76.0308,          -73.9376, -74.11620000000001,          -78.9148,          -76.1202,           -77.053,          -73.7153,          -78.5578,          -75.9757,          -73.3043,          -73.4229,           -76.033,           -73.911,          -74.4007, -78.55670000000001,          -74.5056,          -76.9658,          -72.8651,          -76.6155,          -77.4997, -73.11620000000001,          -75.8997,          -76.6913, -73.80200000000001, -73.80329999999999,          -76.6405,          -77.0894, -74.83159999999999, -72.66289999999999,          -77.0971, -74.14960000000001, -74.40989999999999,           -73.964,          -77.6497,          -75.9083,          -72.7919,          -78.1383,          -75.1683, -77.34999999999999,          -77.1322,          -76.9011, -74.33320000000001,          -76.7225,          -77.3125,          -73.1754,          -77.9589, -76.07640000000001,          -77.9025,           -74.736, -76.82550000000001,           -76.958,          -74.1829,          -74.9802,          -76.4619,          -76.2927,          -74.9665,          -77.5478,          -77.7336, -74.33329999999999, -74.94540000000001,          -75.9385, -74.06489999999999,          -73.3496,          -73.8629, -77.09999999999999,          -78.6831, -77.81829999999999, -74.12990000000001,          -76.8205, -74.08069999999999,          -74.8368,          -75.4024,          -73.5817,          -73.5629, -78.14530000000001, -73.64400000000001,           -76.833,          -74.2154, -74.22369999999999,          -73.6801,          -73.6332,          -73.5829,           -74.164,          -73.8433,          -78.8028,           -78.974,          -73.9226, -76.13939999999999,          -77.1729, -73.59950000000001,          -73.6631,          -73.6401, -75.25409999999999, -78.76260000000001,          -76.0852,          -75.9068, -75.71080000000001, -73.94840000000001,           -73.943, -73.94370000000001,          -73.3687,          -73.8571,          -73.8137,           -73.387,           -73.967, -73.74979999999999, -73.82429999999999,          -73.9371,           -73.982, -73.97750000000001,          -73.9448,          -73.9546, -76.67919999999999, -73.26260000000001, -77.93470000000001,          -79.3617,          -73.7565,          -74.3895,          -73.5916, -73.90770000000001, -78.43000000000001,          -73.8022,          -74.9639, -73.83929999999999, -73.84910000000001,          -77.8408, -73.88590000000001,           -76.848, -77.41249999999999,          -73.9349,          -73.9093,          -78.9175,          -78.1592,           -75.416, -76.90300000000001, -79.27200000000001, -78.37139999999999,          -73.9118,          -74.4584,          -73.4134,          -73.2882,          -77.1122, -74.00069999999999, -75.73309999999999, -74.03530000000001,          -74.0681,          -73.5796,          -73.9619,          -75.0645,           -73.738,          -73.9641, -75.41160000000001,          -76.0436,           -73.751, -74.11490000000001,          -73.6704,          -73.6962,          -78.9653,          -75.0445, -75.75360000000001,            -75.89, -78.88030000000001,          -74.2633,          -75.9585, -77.55800000000001,          -74.1482,          -74.3111, -77.82729999999999,          -78.7353,          -79.2306,          -77.3678, -73.49120000000001,          -73.9404,          -77.6228,          -74.5077,            -77.34,          -79.1942, -78.67310000000001, -77.61579999999999, -73.84529999999999,          -78.3492,           -74.676,          -74.0287,           -73.999,          -78.9864, -74.11620000000001,          -73.4896,          -74.1635,          -75.0204,          -74.4204,          -76.1938,          -79.4817,          -79.0164,          -73.8554,           -78.547, -75.27630000000001,          -74.1404,          -73.0544,          -74.1343,          -77.0517, -79.05119999999999,          -73.5829,          -73.9419, -78.82980000000001,          -73.8138,           -73.749,          -77.3929,          -78.9404,          -74.5715,          -73.6711, -76.97029999999999,          -77.3004, -78.74469999999999, -73.42570000000001,          -73.9803,          -77.6298,          -78.9251,          -73.9696,          -74.0085,          -76.8663,          -73.9388,          -73.3993,          -74.0018,          -73.5904, -73.92189999999999,          -74.0181,          -73.9755,          -73.8603,          -73.0655,          -76.2929,          -76.4258,           -73.425,          -73.7825,          -73.7315, -73.76090000000001,          -78.4543,            -77.67,          -73.9768,          -73.8398,          -73.8613,          -73.8908,           -73.877,          -73.8766, -75.97410000000001,          -74.4033,          -77.1914,          -73.8948, -73.67659999999999,          -72.8665, -72.93040000000001,          -76.4584,           -74.795,          -73.2933,          -74.5177, -78.84950000000001, -73.76220000000001, -73.85039999999999, -78.16759999999999,          -78.9507,          -73.9721, -74.13379999999999, -78.98220000000001,          -74.9888, -74.06180000000001,          -76.4453,          -75.8455,          -74.7496,          -73.7316,          -73.6532,          -73.7162,          -75.0667,          -76.0947,          -78.9689, -76.84690000000001,          -77.5331,          -78.4278,          -78.4961, -79.69450000000001,          -76.3869,          -74.9863,          -73.7012,          -73.9935, -77.27549999999999,          -75.7871,          -73.3062,          -76.0258, -73.71040000000001, -72.51900000000001,          -78.6581, -74.08759999999999,          -77.5733,          -78.0397, -74.82429999999999,          -77.6442, -78.03530000000001, -79.31229999999999,           -78.315, -77.30800000000001,          -73.8579,          -74.0912,          -77.1247, -74.49930000000001, -74.08150000000001,          -73.4783,          -74.1551,          -78.3403,          -75.3138,          -74.7574, -73.56619999999999, -73.88500000000001, -78.95059999999999, -77.38249999999999,          -78.6614,          -73.9023,          -73.8329,          -78.9359,          -78.7998,          -73.7748,           -75.301,          -74.5776,          -78.8535, -79.01300000000001,          -77.1135,          -76.1431,          -78.4144,          -73.6461,          -76.4408,          -79.0365, -78.82299999999999, -74.66419999999999,           -73.913,          -73.1058, -73.99209999999999,          -73.9569,          -73.3871,           -75.194,          -73.8797,          -73.7638, -76.59699999999999,          -79.0924,          -73.7499,          -76.4256,          -73.0784,          -78.0805, -78.07810000000001, -73.27079999999999,           -73.563, -76.49720000000001,          -76.4079,          -73.3335,          -73.9037,          -73.9452,          -73.7898,           -74.422,          -75.7071, -73.88120000000001, -73.84690000000001,          -73.8858,          -75.9196,          -75.9709,           -73.959, -78.71939999999999, -73.06619999999999,           -79.258, -75.98820000000001,          -73.1074,          -72.0316, -77.68210000000001, -74.13290000000001,          -73.7704, -75.46550000000001,          -73.4329, -73.78440000000001, -74.32899999999999,          -78.4825, -76.38809999999999,          -73.8899,          -73.7324,          -78.0521,          -78.7034,           -73.834,          -76.1528,          -78.0431, -76.11490000000001,          -79.4439, -78.77979999999999,          -78.4045,          -78.4764, -73.81619999999999, -73.91759999999999, -73.70529999999999,          -74.3329,            -79.03, -78.78230000000001,            -78.52,          -76.2247,           -74.151, -72.34950000000001,          -74.9346, -73.49120000000001, -73.86620000000001,          -73.4196,           -78.967, -73.86620000000001,          -78.2664,          -73.9529,          -77.2114, -74.92149999999999, -73.61190000000001,          -74.5167,          -78.0497, -73.56789999999999,          -73.2654,          -78.5561,          -74.0163,          -76.5633,          -74.6788,           -76.408,          -75.3002, -73.55929999999999,          -74.4954,          -75.5419,          -75.9117,          -76.3013,          -75.7028,          -76.4858,          -73.7483,          -79.6859,          -75.6049,          -77.5078, -74.97620000000001,          -73.9996,          -76.2213, -78.90730000000001,          -74.2496,          -78.6473,          -78.8378, -76.02670000000001,          -73.7623,          -77.3023, -78.00790000000001, -74.06310000000001,          -73.3698,          -76.2046,          -73.5682,          -73.7457,          -73.6478,           -73.569,           -75.601,          -79.0223,          -79.0068, -78.97839999999999, -78.83320000000001,          -73.9117, -78.73399999999999,          -78.5022,          -77.6828, -77.66630000000001,          -78.9252,          -75.7717,          -74.3642,          -73.3583,          -74.2423,          -76.2162,          -73.8096,          -79.1571,          -75.1678, -78.69889999999999,          -78.9273, -73.89660000000001,          -73.2296,          -72.6431, -73.87520000000001,          -77.4115,          -77.7968,          -74.8926, -73.85639999999999,          -76.4551,          -78.1681,          -76.4293, -75.39749999999999,          -76.4713,          -73.9389,          -73.8275,          -73.8832,          -73.9853,          -73.6348, -78.78060000000001,          -78.8297,          -74.4744,           -78.919,          -73.4087,          -73.9744,          -72.7487, -77.68129999999999,          -73.0778,          -73.9385,          -77.7131, -73.96639999999999,          -73.7426,          -73.4132,          -78.6123,          -74.2092,          -77.0843,          -76.4408,          -73.2621,           -73.384, -74.37739999999999, -74.00709999999999,          -73.8608, -75.40170000000001, -74.04900000000001, -77.96080000000001,          -74.5243,          -75.2496, -73.74290000000001,           -76.188, -73.36620000000001,           -74.765,          -74.0162,          -73.8276,          -73.7261, -75.64960000000001,          -74.6117, -73.53149999999999,           -73.431,          -76.9311,          -77.2914,          -78.3584,          -78.3539, -77.74809999999999,          -73.6794,          -73.6298,          -74.2376,          -75.2278, -76.72969999999999, -73.80459999999999,          -73.9996,          -76.4413,          -74.9063,          -73.5962,          -78.7873, -78.27460000000001,          -79.0818,          -73.9496, -78.21169999999999,          -74.2475, -77.17749999999999,          -73.6596,          -74.1758,          -73.5462, -73.77209999999999, -78.17829999999999, -78.18470000000001,          -72.2801,          -73.8257,          -74.0772,          -76.2692,          -73.9121,          -74.6268,          -75.9571,          -74.7363,          -77.7144,          -77.5235,          -79.0095, -76.36879999999999,          -74.1163,            -76.69,          -72.4567, -78.89530000000001, -73.61620000000001, -73.37869999999999, -74.11490000000001,          -74.6913,          -77.2428,          -77.8425,          -76.7963,          -76.8497,          -76.8788,          -73.7829, -76.64109999999999,          -76.5324,          -78.5997, -77.05800000000001,          -73.9693,          -73.9019,          -75.6383,          -74.3733,          -78.8659,          -73.7663, -74.32940000000001,           -73.648,          -73.4992,          -75.6926,          -78.8531,          -78.6058,          -76.2246, -73.70269999999999,          -75.9186,           -75.621, -73.96259999999999, -73.95180000000001,          -73.9905,          -78.9186,           -74.023,          -74.3597,          -73.6681,          -73.9156,          -73.9592,          -73.9538,          -73.9526,          -73.9563, -73.94240000000001,          -73.9967,          -76.8194, -73.21420000000001,          -73.1232,          -76.9486,          -72.3819,          -73.9743,          -74.1871,          -76.5547,           -79.697,          -76.5316,          -76.2089, -74.75149999999999,           -73.803, -77.92010000000001,          -72.2103,          -73.8955,          -74.0091,          -73.4543,          -73.8721, -77.14400000000001,           -76.968, -77.29389999999999,          -78.8382,          -78.8404, -73.34950000000001,          -76.2149, -73.46810000000001,          -72.8621,           -72.639, -75.56140000000001,          -77.1549, -77.38209999999999,          -76.7811,          -73.9174, -73.87260000000001,          -73.9504,          -78.7422,          -74.2647,           -73.836,          -77.1204,          -73.9729,           -74.009, -72.37609999999999,          -74.1521,          -73.7496, -73.79130000000001, -75.92019999999999, -76.22020000000001, -77.79219999999999, -74.93210000000001,          -74.2454, -75.17100000000001, -72.71680000000001,          -73.2015,          -76.0902,          -78.3156, -78.79000000000001, -78.81610000000001,          -73.4969, -73.50790000000001, -78.83280000000001,          -74.1551,          -73.9974,          -75.4307,          -75.2657,          -77.6125,          -75.4722, -74.01479999999999,          -74.4024, -75.19110000000001,          -74.2424,          -79.3292, -75.95489999999999, -79.22499999999999, -73.83369999999999,          -73.4653,          -74.3222,          -73.5736,          -74.3257,          -78.2139,          -75.4307,          -77.1819,          -76.6169, -77.42749999999999,          -78.5956,          -75.1846, -74.11620000000001,          -77.9203, -74.25369999999999,          -79.3914, -76.51609999999999, -74.40989999999999, -73.63849999999999,          -78.6347,          -73.8626,          -73.9246,            -72.36,          -76.7705,          -76.2871,          -73.8746,          -76.3497,          -76.0149,          -73.7133,          -74.5043, -73.92740000000001,          -73.3635, -73.66849999999999,          -73.9067,          -78.7547,          -77.6315,            -75.31,          -73.5181,          -74.0411,          -73.7383,          -73.8617,          -73.7433,          -73.7024, -73.52630000000001, -73.91330000000001,          -74.0234, -73.99850000000001,          -77.6536,          -73.2899, -73.82470000000001,          -73.9395,            -73.95,          -73.9298,          -76.5741,          -77.5896,          -73.9889,            -76.61,          -75.5205,          -73.1844,          -72.7098,          -72.3905, -73.96720000000001,          -73.9622,          -73.4328,          -73.8716, -73.72920000000001,          -79.3476,          -79.3207,          -73.7534,          -76.1147,          -73.4602, -73.59529999999999,             -73.8,          -76.4495,          -76.4756,           -73.946,           -73.908,          -73.9016, -73.83629999999999,          -73.7706,          -73.7084, -73.81829999999999,          -73.7818, -74.42010000000001,          -74.3797,          -74.0099,          -78.0682,          -77.7403,          -73.8926, -73.84439999999999,           -78.876,          -78.8078,          -73.3424,          -72.9311,           -72.881,          -78.0038, -77.98999999999999,          -71.9204, -72.25190000000001, -73.05370000000001,          -74.9485,          -74.8456,           -74.066,          -77.9375,          -74.2062,          -73.6103,          -73.9344,          -76.1788, -74.54819999999999,          -75.8413,          -74.0489,          -75.0663,          -73.9829, -74.18429999999999,           -73.479,           -72.464, -78.81140000000001,          -77.2039,          -74.3874,          -75.0163, -74.82080000000001, -72.66249999999999,           -73.556,          -73.5806, -78.76779999999999,          -79.5706, -72.91679999999999,          -77.3372,          -74.6524,          -72.5694,           -76.761,          -72.6995,          -74.1871,          -74.3246,          -72.1734,           -74.404,          -76.1405,            -78.05, -74.78019999999999,          -75.1611,          -73.6371,          -76.9905, -74.89960000000001,          -78.9853,          -74.0247,          -74.1361, -74.08329999999999, -76.59690000000001,          -75.4863,          -74.7299, -75.59910000000001,          -78.3981,          -74.3652, -78.42610000000001,          -75.9996,          -74.7619,          -74.4697,           -73.819,          -74.3518,          -79.0775,          -74.9097, -73.86790000000001, -79.06229999999999,          -73.8685,          -74.6246, -78.46259999999999,          -76.5896,          -72.9404,          -74.1532, -73.96080000000001, -72.76300000000001,          -78.8117 ],
               10,
null,
{
 "lineCap": null,
"lineJoin": null,
"clickable": true,
"pointerEvents": null,
"className": "",
"stroke": true,
"color": "#03F",
"weight":                 5,
"opacity":               0.5,
"fill": true,
"fillColor": "#03F",
"fillOpacity":               0.2,
"dashArray": null 
},
null 
] 
} 
],
"limits": {
 "lat": [           40.5445,           44.9917 ],
"lng": [           -79.697,          -71.9204 ] 
} 
},"evals": [  ] }</script><!--/html_preserve-->

Cool, huh? Leaflet automatically searches for columns in your dataframe named latitude/longitude, or some variant of those words and plots to those points. The zoom is set to the closest level that contains your entire set of points.

You also have some flexibility with this call. Here we explicitly override any data already in m with %>% to plot our NOx sites. If we already had that data referenced in m, we could just do this, with the same result:
``` 
m = leaflet(data = NOx_NY) %>% addTiles() %>% addCircles()
m
```
